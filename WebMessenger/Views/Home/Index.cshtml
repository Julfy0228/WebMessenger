@{ ViewData["Title"] = "Главная"; }

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6 text-center">
            <div class="mb-5">
                <i class="bi bi-chat-dots-fill display-1 text-primary mb-4"></i>
                <h1 class="display-5 fw-bold mb-3">Добро пожаловать в WebMessenger</h1>
                <p class="lead text-muted mb-4">
                    Современный мессенджер с поддержкой групповых и приватных чатов,
                    отправкой файлов, аудио, видео и геолокации.
                </p>
            </div>

            <div class="row g-4">
                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center p-4">
                            <i class="bi bi-people-fill text-primary fs-1 mb-3"></i>
                            <h5 class="card-title">Групповые чаты</h5>
                            <p class="card-text text-muted">Создавайте группы для общения с друзьями и коллегами</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center p-4">
                            <i class="bi bi-file-earmark-arrow-up-fill text-success fs-1 mb-3"></i>
                            <h5 class="card-title">Обмен файлами</h5>
                            <p class="card-text text-muted">Отправляйте документы, изображения, аудио и видео</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card border-0 shadow-sm h-100">
                        <div class="card-body text-center p-4">
                            <i class="bi bi-lightning-charge-fill text-warning fs-1 mb-3"></i>
                            <h5 class="card-title">В реальном времени</h5>
                            <p class="card-text text-muted">Мгновенная доставка сообщений через SignalR</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-5">
                @if (User.Identity?.IsAuthenticated == true)
                {
                    <a asp-controller="Home" asp-action="Chats" class="btn btn-primary btn-lg px-5">
                        <i class="bi bi-arrow-right-circle me-2"></i>Перейти к чатам
                    </a>
                }
                else
                {
                    <button class="btn btn-primary btn-lg px-5" data-bs-toggle="modal" data-bs-target="#authModal">
                        <i class="bi bi-door-open me-2"></i>Начать общение
                    </button>
                }

            </div>

            <div class="mt-5 text-muted small">
                <p class="mb-1">Уже используете WebMessenger?</p>
                <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#authModal">
                    Войдите в свой аккаунт
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .card {
        transition: transform 0.2s;
    }

        .card:hover {
            transform: translateY(-5px);
        }
</style>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);

            if (urlParams.get('emailConfirmed') === 'true') {
                const modalEl = document.getElementById('authModal');
                const modal = new bootstrap.Modal(modalEl);
                modal.show();

                const errorDiv = document.getElementById("authError");
                errorDiv.className = "alert alert-success";
                errorDiv.textContent = "Почта подтверждена! Теперь вы можете войти.";
                errorDiv.classList.remove("d-none");
            }
        });
    </script>
}